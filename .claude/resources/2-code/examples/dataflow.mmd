---
title: Full-Stack Data Flow
---
graph TB
    %% Frontend Components
    LoginForm[Login Form Component]
    Dashboard[Dashboard Component]
    PostList[Post List Component]
    PostForm[Create Post Component]

    %% API Layer
    ApiLogin[POST /api/login]
    ApiGetUser[GET /api/user]
    ApiGetPosts[GET /api/posts]
    ApiCreatePost[POST /api/posts]

    %% Backend Controllers
    AuthController[AuthController]
    UserController[UserController]
    PostController[PostController]

    %% Services
    AuthService[AuthService]
    PostService[PostService]

    %% Repositories
    UserRepository[UserRepository]
    PostRepository[PostRepository]

    %% Database
    Database[(Database)]

    %% Response Resources
    UserResource[UserResource]
    PostResource[PostResource Collection]
    PostSingleResource[PostResource]

    %% Frontend State
    AuthStore[Auth Store]
    PostsStore[Posts Store]

    %% Login Flow
    LoginForm -->|1. Submit credentials| ApiLogin
    ApiLogin -->|2. Route to| AuthController
    AuthController -->|3. Validate| AuthService
    AuthService -->|4. Query| UserRepository
    UserRepository -->|5. Check| Database
    Database -->|6. Return user| UserRepository
    UserRepository -->|7. User data| AuthService
    AuthService -->|8. Generate token| AuthController
    AuthController -->|9. Format| UserResource
    UserResource -->|10. JSON response| LoginForm
    LoginForm -->|11. Store token| AuthStore

    %% Dashboard Flow
    Dashboard -->|1. Request user| ApiGetUser
    ApiGetUser -->|2. Route to| UserController
    UserController -->|3. Get auth user| UserRepository
    UserRepository -->|4. Query| Database
    Database -->|5. Return| UserRepository
    UserRepository -->|6. User data| UserController
    UserController -->|7. Format| UserResource
    UserResource -->|8. JSON| Dashboard

    %% Post List Flow
    PostList -->|1. Fetch posts| ApiGetPosts
    ApiGetPosts -->|2. Route to| PostController
    PostController -->|3. Get all| PostService
    PostService -->|4. Query with relations| PostRepository
    PostRepository -->|5. SELECT with JOIN| Database
    Database -->|6. Return posts| PostRepository
    PostRepository -->|7. Post collection| PostService
    PostService -->|8. Business logic| PostController
    PostController -->|9. Format| PostResource
    PostResource -->|10. JSON array| PostList
    PostList -->|11. Update| PostsStore

    %% Create Post Flow
    PostForm -->|1. Submit data| ApiCreatePost
    ApiCreatePost -->|2. Route to| PostController
    PostController -->|3. Validate & create| PostService
    PostService -->|4. Store| PostRepository
    PostRepository -->|5. INSERT| Database
    Database -->|6. Return new post| PostRepository
    PostRepository -->|7. Post model| PostService
    PostService -->|8. Dispatch events| PostController
    PostController -->|9. Format| PostSingleResource
    PostSingleResource -->|10. JSON| PostForm
    PostForm -->|11. Update & redirect| PostsStore

    %% Styling
    classDef frontend fill:#3B82F6,stroke:#1E40AF,color:#fff
    classDef api fill:#8B5CF6,stroke:#6D28D9,color:#fff
    classDef controller fill:#10B981,stroke:#059669,color:#fff
    classDef service fill:#F59E0B,stroke:#D97706,color:#fff
    classDef repository fill:#EF4444,stroke:#DC2626,color:#fff
    classDef database fill:#6366F1,stroke:#4F46E5,color:#fff
    classDef resource fill:#EC4899,stroke:#DB2777,color:#fff
    classDef store fill:#14B8A6,stroke:#0D9488,color:#fff

    class LoginForm,Dashboard,PostList,PostForm frontend
    class ApiLogin,ApiGetUser,ApiGetPosts,ApiCreatePost api
    class AuthController,UserController,PostController controller
    class AuthService,PostService service
    class UserRepository,PostRepository repository
    class Database database
    class UserResource,PostResource,PostSingleResource resource
    class AuthStore,PostsStore store

%% Legend:
%% Blue = Frontend Components
%% Purple = API Endpoints
%% Green = Controllers
%% Orange = Services
%% Red = Repositories
%% Indigo = Database
%% Pink = API Resources
%% Teal = Frontend State

%% Generated: 2025-10-31
%% Auto-updated by /2-code skill
