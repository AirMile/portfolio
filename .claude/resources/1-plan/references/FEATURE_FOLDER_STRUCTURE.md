# Feature Folder Structure

This document describes the folder structure and naming conventions for feature context files generated by the `/1-plan` skill.

## Feature Structure

All features use flat structure with single files per concern:

```
.workspace/features/{feature-name}/
├── 01-intent.md       # All intents (feature + parts) with status markers
├── 01-research.md     # All research in one file with part sections
└── 01-architecture.md # Architecture blueprint (if FASE 3.5 executed)
```

## Single File Model

**Everything in one file per concern, tracked with checkmarks:**

- Parts are sections within the main files, not separate folders
- Status markers show progress at a glance
- Claude reads one file, gets complete feature context

## Status Markers

```
○ = pending (not started)
● = in_progress (being worked on)
✓ = completed (done)
✗ = blocked (has issues)
```

## File Structure Examples

### 01-intent.md with Parts

```markdown
# Checkout

**Generated:** 2025-01-15
**Complexity:** 75/100
**Status:** 2/3 parts complete

## Feature Overview
User checkout flow with cart, payment, and confirmation.

## Parts

### ○ 01-cart-models
- Status: pending
- Dependencies: none
- Requirements: 5

### ✓ 02-payment-backend (2025-01-16)
- Status: completed
- Dependencies: 01-cart-models
- Requirements: 8

### ○ 03-checkout-ui
- Status: pending
- Dependencies: 02-payment-backend
- Requirements: 6

---

## Feature Requirements

### Testable Requirements
| ID | Description | Status |
|----|-------------|--------|
| REQ-001 | Cart stores items | ○ |
| REQ-002 | Cart calculates total | ○ |

---

## Part: 01-cart-models

**Dependencies:** none

### Scope
Create Cart model with add/remove items functionality.

### Testable Requirements
| ID | Description | Status |
|----|-------------|--------|
| REQ-001 | Cart stores items | ○ |
| REQ-002 | Cart calculates total | ○ |

---

## Part: 02-payment-backend

**Dependencies:** 01-cart-models

### Testable Requirements
| ID | Description | Status |
|----|-------------|--------|
| REQ-003 | Process payment | ✓ |
| REQ-004 | Handle errors | ✓ |
```

## Extend/Change Behavior

Extends and changes **append to existing files** instead of creating subfolders:

```
.workspace/features/checkout/
├── 01-intent.md       ← extend/change intent APPENDED here
├── 01-research.md     ← extend/change research APPENDED here
└── 01-architecture.md ← architecture updates APPENDED here
```

### Extend/Change Section Format

```markdown
---

## Extend: Guest Checkout (2025-01-15)

**Complexity:** 45/100
**Requirements:** 3 testable

### Overview
Allow checkout without user account.

### Testable Requirements
| ID | Description | Status |
|----|-------------|--------|
| REQ-010 | Guest can checkout | ○ |
```

## Benefits

1. **Single source of truth** - One file shows complete feature state
2. **Progress visible** - Checkmarks show what's done at a glance
3. **Better Claude context** - Reads one file, knows everything
4. **Simpler navigation** - No folder hierarchy to traverse
5. **Natural ordering** - Parts ordered by section, not folders

## Naming Conventions

### Feature Names
- Use lowercase letters and hyphens only
- No spaces, underscores, or special characters
- Descriptive but concise (max 30 chars recommended)
- Examples: `user-profile`, `checkout-flow`, `recipe-management`

### Part Names
- Pattern: `{NN}-{concern-name}`
- 01 for foundational layers (usually models)
- 02+ for dependent layers
- Examples: `01-cart-models`, `02-payment-backend`, `03-checkout-ui`

### File Names
- Always use numbered prefixes for sort order
- `01-intent.md` - Requirements and scope (with part sections)
- `01-research.md` - Research and patterns (with part sections)
- `01-architecture.md` - Architecture blueprint (optional)

## File Contents

### 01-intent.md
Contains:
- Feature overview
- Part summary with status markers
- Feature-level testable requirements
- Functional requirements
- Data models needed
- UI components needed
- Edge cases
- Constraints
- Success criteria
- **Part sections** (each with own requirements)
- **Extend/Change sections** (appended chronologically)

### 01-research.md
Contains:
- Framework best practices (conventions, idioms, API usage)
- Architecture patterns
- Database schema recommendations
- Testing strategy
- Common pitfalls
- Context7 sources with coverage scores
- **Part research sections**
- **Extend/Change research** (appended chronologically)

### 01-architecture.md
Contains:
- Selected approach and philosophy
- Design overview
- Files to create (with purposes)
- Files to modify (with reasons)
- Implementation sequence (phased)
- Critical considerations
- Estimated complexity
- **Architecture updates for extends/changes** (appended)
